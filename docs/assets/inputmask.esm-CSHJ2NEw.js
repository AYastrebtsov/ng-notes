import{r as s}from"./index-DGAqIW1f.js";import{P as ne}from"./api.esm-CqhHtwfv.js";import{D as b,C as ae,d as ye,e as he,O as D,c as ue,u as be,a as X}from"./ripple.esm-xpvgVRPj.js";import{T as Pe}from"./StyledButton-CXOy1qY9.js";function q(u,n){(n==null||n>u.length)&&(n=u.length);for(var o=0,e=new Array(n);o<n;o++)e[o]=u[o];return e}function Oe(u){if(Array.isArray(u))return q(u)}function xe(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}function Ie(u,n){if(u){if(typeof u=="string")return q(u,n);var o=Object.prototype.toString.call(u).slice(8,-1);if(o==="Object"&&u.constructor&&(o=u.constructor.name),o==="Map"||o==="Set")return Array.from(u);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return q(u,n)}}function Ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ee(u){return Oe(u)||xe(u)||Ie(u)||Ce()}var A={DEFAULT_MASKS:{pint:/[\d]/,int:/[\d\-]/,pnum:/[\d\.]/,money:/[\d\.\s,]/,num:/[\d\-\.]/,hex:/[0-9a-f]/i,email:/[a-z0-9_\.\-@]/i,alpha:/[a-z_]/i,alphanum:/[a-z0-9_]/i},getRegex:function(n){return A.DEFAULT_MASKS[n]?A.DEFAULT_MASKS[n]:n},onBeforeInput:function(n,o,e){e||!b.isAndroid()||this.validateKey(n,n.data,o)},onKeyPress:function(n,o,e){e||b.isAndroid()||n.ctrlKey||n.altKey||this.validateKey(n,n.key,o)},onPaste:function(n,o,e){if(!e){var r=this.getRegex(o),g=n.clipboardData.getData("text");Ee(g).forEach(function(P){if(!r.test(P))return n.preventDefault(),!1})}},validateKey:function(n,o,e){if(o!=null){var r=o.length===1;if(r){var g=this.getRegex(e);g.test(o)||n.preventDefault()}}},validate:function(n,o){var e=n.target.value,r=!0,g=this.getRegex(o);return e&&!g.test(e)&&(r=!1),r}};function V(){return V=Object.assign?Object.assign.bind():function(u){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(u[e]=o[e])}return u},V.apply(this,arguments)}function B(u){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},B(u)}function Re(u,n){if(B(u)!=="object"||u===null)return u;var o=u[Symbol.toPrimitive];if(o!==void 0){var e=o.call(u,n||"default");if(B(e)!=="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(u)}function we(u){var n=Re(u,"string");return B(n)==="symbol"?n:String(n)}function ke(u,n,o){return n=we(n),n in u?Object.defineProperty(u,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):u[n]=o,u}var Se={root:function(n){var o=n.props,e=n.isFilled;return ue("p-inputtext p-component",{"p-disabled":o.disabled,"p-filled":e,"p-invalid":o.invalid},o.className)}},N=ae.extend({defaultProps:{__TYPE:"InputText",__parentMetadata:null,children:void 0,className:null,invalid:!1,keyfilter:null,onBeforeInput:null,onInput:null,onKeyDown:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1},css:{classes:Se}});function ee(u,n){var o=Object.keys(u);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(u);n&&(e=e.filter(function(r){return Object.getOwnPropertyDescriptor(u,r).enumerable})),o.push.apply(o,e)}return o}function te(u){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?ee(Object(o),!0).forEach(function(e){ke(u,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(o)):ee(Object(o)).forEach(function(e){Object.defineProperty(u,e,Object.getOwnPropertyDescriptor(o,e))})}return u}var le=s.memo(s.forwardRef(function(u,n){var o=ye(),e=s.useContext(ne),r=N.getProps(u,e),g=N.setMetaData(te(te({props:r},r.__parentMetadata),{},{context:{disabled:r.disabled}})),P=g.ptm,v=g.cx,d=g.isUnstyled;he(N.css.styles,d,{name:"inputtext",styled:!0});var m=s.useRef(n),j=function(h){r.onKeyDown&&r.onKeyDown(h),r.keyfilter&&A.onKeyPress(h,r.keyfilter,r.validateOnly)},_=function(h){r.onBeforeInput&&r.onBeforeInput(h),r.keyfilter&&A.onBeforeInput(h,r.keyfilter,r.validateOnly)},E=function(h){var y=h.target,K=!0;r.keyfilter&&r.validateOnly&&(K=A.validate(h,r.keyfilter)),r.onInput&&r.onInput(h,K),D.isNotEmpty(y.value)?b.addClass(y,"p-filled"):b.removeClass(y,"p-filled")},U=function(h){r.onPaste&&r.onPaste(h),r.keyfilter&&A.onPaste(h,r.keyfilter,r.validateOnly)};s.useEffect(function(){D.combinedRefs(m,n)},[m,n]);var O=s.useMemo(function(){return D.isNotEmpty(r.value)||D.isNotEmpty(r.defaultValue)},[r.value,r.defaultValue]),R=D.isNotEmpty(r.tooltip),T=o({className:v("root",{isFilled:O}),onBeforeInput:_,onInput:E,onKeyDown:j,onPaste:U},N.getOtherProps(r),P("root"));return s.createElement(s.Fragment,null,s.createElement("input",V({ref:m},T)),R&&s.createElement(Pe,V({target:m,content:r.tooltip,pt:P("tooltip")},r.tooltipOptions)))}));le.displayName="InputText";function $(){return $=Object.assign?Object.assign.bind():function(u){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(u[e]=o[e])}return u},$.apply(this,arguments)}var re=ae.extend({defaultProps:{__TYPE:"InputMask",autoClear:!0,autoFocus:!1,className:null,disabled:!1,id:null,mask:null,maxLength:null,name:null,onBlur:null,onChange:null,onComplete:null,onFocus:null,placeholder:null,readOnly:!1,required:!1,size:null,slotChar:"_",style:null,tabIndex:null,tooltip:null,tooltipOptions:null,type:"text",unmask:!1,value:null,children:void 0}}),Ke=s.memo(s.forwardRef(function(u,n){var o=s.useContext(ne),e=re.getProps(u,o),r=s.useRef(null),g=s.useRef(null),P=s.useRef(0),v=s.useRef([]),d=s.useRef([]),m=s.useRef(0),j=s.useRef(null),_=s.useRef(!1),E=s.useRef(null),U=s.useRef(null),O=s.useRef(null),R=s.useRef(null),T=s.useRef(null),S=s.useRef(!1),h={props:e},y=function(t,l){var a,i,c,p=r.current;return!p||!p.offsetParent||p!==document.activeElement?null:(typeof t=="number"?(i=t,c=typeof l=="number"?l:i,p.setSelectionRange?p.setSelectionRange(i,c):p.createTextRange&&(a=p.createTextRange(),a.collapse(!0),a.moveEnd("character",c),a.moveStart("character",i),a.select())):p.setSelectionRange?(i=p.selectionStart,c=p.selectionEnd):document.selection&&document.selection.createRange&&(a=document.selection.createRange(),i=0-a.duplicate().moveStart("character",-1e5),c=i+a.text.length),{begin:i,end:c})},K=function(){for(var t=g.current;t<=P.current;t++)if(v.current[t]&&d.current[t]===x(t))return!1;return!0},x=s.useCallback(function(f){return f<e.slotChar.length?e.slotChar.charAt(f):e.slotChar.charAt(0)},[e.slotChar]),L=function(){return e.unmask?F():r.current&&r.current.value},w=function(t){for(;++t<m.current&&!v.current[t];);return t},oe=function(t){for(;--t>=0&&!v.current[t];);return t},Y=function(t,l){var a,i;if(!(t<0)){for(a=t,i=w(l);a<m.current;a++)if(v.current[a]){if(i<m.current&&v.current[a].test(d.current[i]))d.current[a]=d.current[i],d.current[i]=x(i);else break;i=w(i)}k(),y(Math.max(g.current,t))}},ie=function(t){var l,a,i,c;for(l=t,a=x(t);l<m.current;l++)if(v.current[l])if(i=w(l),c=d.current[l],d.current[l]=a,i<m.current&&v.current[i].test(c))a=c;else break},se=function(t){var l=r.current.value,a=y();if(a){if(j.current.length&&j.current.length>l.length){for(I(!0);a.begin>0&&!v.current[a.begin-1];)a.begin--;if(a.begin===0)for(;a.begin<g.current&&!v.current[a.begin];)a.begin++;y(a.begin,a.begin)}else{for(I(!0);a.begin<m.current&&!v.current[a.begin];)a.begin++;y(a.begin,a.begin)}e.onComplete&&K()&&e.onComplete({originalEvent:t,value:L()}),C(t)}},Z=function(t){if(_.current=!1,I(),C(t),z(),e.onBlur&&e.onBlur(t),r.current.value!==E.current){var l=document.createEvent("HTMLEvents");l.initEvent("change",!0,!1),r.current.dispatchEvent(l)}},ce=function(t){if(!e.readOnly){var l=t.which||t.keyCode,a,i,c;if(j.current=r.current.value,l===8||l===46||b.isIOS()&&l===127){if(a=y(),!a)return;i=a.begin,c=a.end,c-i===0&&(i=l!==46?oe(i):c=w(i-1),c=l===46?w(c):c),M(i,c),Y(i,c-1),C(t),t.preventDefault()}else l===13?(Z(t),C(t)):l===27&&(r.current.value=E.current,y(0,I()),C(t),t.preventDefault())}},fe=function(t){if(!e.readOnly){var l=y();if(l){var a=t.which||t.keyCode,i,c,p,Q;if(!(t.ctrlKey||t.altKey||t.metaKey||a<32)){if(a&&a!==13){if(l.end-l.begin!==0&&(M(l.begin,l.end),Y(l.begin,l.end-1)),i=w(l.begin-1),i<m.current&&(c=String.fromCharCode(a),v.current[i].test(c))){if(ie(i),d.current[i]=c,k(),p=w(i),b.isAndroid()){var ge=function(){y(p)};setTimeout(ge,0)}else y(p);l.begin<=P.current&&(Q=K())}t.preventDefault()}C(t),e.onComplete&&Q&&e.onComplete({originalEvent:t,value:L()})}}}},M=function(t,l){var a;for(a=t;a<l&&a<m.current;a++)v.current[a]&&(d.current[a]=x(a))},k=function(){r.current&&(r.current.value=d.current.join(""))},I=function(t){U.current=!0;var l=r.current&&r.current.value,a=-1,i,c,p;for(i=0,p=0;i<m.current;i++)if(v.current[i]){for(d.current[i]=x(i);p++<l.length;)if(c=l.charAt(p-1),v.current[i].test(c)){d.current[i]=c,a=i;break}if(p>l.length){M(i+1,m.current);break}}else d.current[i]===l.charAt(p)&&p++,i<O.current&&(a=i);return t?k():a+1<O.current?e.autoClear||d.current.join("")===R.current?(r.current&&r.current.value&&(r.current.value=""),M(0,m.current)):k():(k(),r.current&&(r.current.value=r.current.value.substring(0,a+1))),O.current?i:g.current},pe=function(t){if(!e.readOnly){_.current=!0,clearTimeout(T.current);var l;r.current?E.current=r.current.value:E.current="",l=I()||0,T.current=setTimeout(function(){r.current===document.activeElement&&(k(),l===e.mask.replace("?","").length?y(0,l):y(l),z())},100),e.onFocus&&e.onFocus(t)}},ve=function(t){S.current?se(t):W(t)},W=function(t){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e.readOnly){if(!l){var a=I(!0);y(a)}C(t),e.onComplete&&K()&&e.onComplete({originalEvent:t,value:L()})}},F=s.useCallback(function(){for(var f=[],t=0;t<d.current.length;t++){var l=d.current[t];v.current[t]&&l!==x(t)&&f.push(l)}return f.join("")},[x]),C=function(t){if(e.onChange){var l=e.unmask?F():t&&t.target.value;e.onChange({originalEvent:t,value:R.current!==l?l:"",stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()},target:{name:e.name,id:e.id,value:R.current!==l?l:""}})}},z=function(){r.current&&r.current.value&&r.current.value.length>0?b.addClass(r.current,"p-filled"):b.removeClass(r.current,"p-filled")},H=function(t){var l;return r.current&&(e.value==null?r.current.value="":(r.current.value=e.value,l=I(t),setTimeout(function(){if(r.current)return k(),I(t)},10)),E.current=r.current.value),z(),l},G=s.useCallback(function(){return e.unmask?e.value!==F():R.current!==r.current.value&&r.current.value!==e.value},[e.unmask,e.value,F]),J=function(){if(e.mask){v.current=[],O.current=e.mask.length,m.current=e.mask.length,g.current=null;var t={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};S.current=b.isChrome()&&b.isAndroid();for(var l=e.mask.split(""),a=0;a<l.length;a++){var i=l[a];i==="?"?(m.current--,O.current=a):t[i]?(v.current.push(new RegExp(t[i])),g.current===null&&(g.current=v.current.length-1),a<O.current&&(P.current=v.current.length-1)):v.current.push(null)}d.current=[];for(var c=0;c<l.length;c++){var p=l[c];p!=="?"&&(t[p]?d.current.push(x(c)):d.current.push(p))}R.current=d.current.join("")}};s.useImperativeHandle(n,function(){return{props:e,focus:function(){return b.focus(r.current)},getElement:function(){return r.current}}}),s.useEffect(function(){D.combinedRefs(r,n)},[r,n]),be(function(){J(),H()}),X(function(){J(),y(H(!0)),e.unmask&&C()},[e.mask]),X(function(){G()&&H()},[G]);var de=re.getOtherProps(e),me=ue("p-inputmask",e.className);return s.createElement(le,$({ref:r,autoFocus:e.autoFocus,id:e.id,type:e.type,name:e.name,style:e.style,className:me},de,{placeholder:e.placeholder,size:e.size,maxLength:e.maxLength,tabIndex:e.tabIndex,disabled:e.disabled,readOnly:e.readOnly,onFocus:pe,onBlur:Z,onKeyDown:ce,onKeyPress:fe,onInput:ve,onPaste:function(t){return W(t,!0)},required:e.required,tooltip:e.tooltip,tooltipOptions:e.tooltipOptions,pt:e.pt,unstyled:e.unstyled,__parentMetadata:{parent:h}}))}));Ke.displayName="InputMask";export{Ke as I,le as a};
