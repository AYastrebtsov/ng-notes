import{_ as j}from"./extends-CCbyfPlC.js";import{r as c}from"./index-DVXBtNgz.js";var y;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(y||(y={}));var _=function(e){return e},M="beforeunload",F="popstate";function le(e){e===void 0&&(e={});var t=e,n=t.window,a=n===void 0?document.defaultView:n,r=a.history;function u(){var i=a.location,o=i.pathname,h=i.search,g=i.hash,p=r.state||{};return[p.idx,_({pathname:o,search:h,hash:g,state:p.usr||null,key:p.key||"default"})]}var l=null;function s(){if(l)m.call(l),l=null;else{var i=y.Pop,o=u(),h=o[0],g=o[1];if(m.length){if(h!=null){var p=v-h;p&&(l={action:i,location:g,retry:function(){E(p*-1)}},E(p))}}else W(i)}}a.addEventListener(F,s);var f=y.Pop,d=u(),v=d[0],P=d[1],b=A(),m=A();v==null&&(v=0,r.replaceState(j({},r.state,{idx:v}),""));function C(i){return typeof i=="string"?i:Q(i)}function w(i,o){return o===void 0&&(o=null),_(j({pathname:P.pathname,hash:"",search:""},typeof i=="string"?k(i):i,{state:o,key:G()}))}function $(i,o){return[{usr:i.state,key:i.key,idx:o},C(i)]}function B(i,o,h){return!m.length||(m.call({action:i,location:o,retry:h}),!1)}function W(i){f=i;var o=u();v=o[0],P=o[1],b.call({action:f,location:P})}function H(i,o){var h=y.Push,g=w(i,o);function p(){H(i,o)}if(B(h,g,p)){var x=$(g,v+1),O=x[0],S=x[1];try{r.pushState(O,"",S)}catch{a.location.assign(S)}W(h)}}function J(i,o){var h=y.Replace,g=w(i,o);function p(){J(i,o)}if(B(h,g,p)){var x=$(g,v),O=x[0],S=x[1];r.replaceState(O,"",S),W(h)}}function E(i){r.go(i)}var q={get action(){return f},get location(){return P},createHref:C,push:H,replace:J,go:E,back:function(){E(-1)},forward:function(){E(1)},listen:function(o){return b.push(o)},block:function(o){var h=m.push(o);return m.length===1&&a.addEventListener(M,z),function(){h(),m.length||a.removeEventListener(M,z)}}};return q}function z(e){e.preventDefault(),e.returnValue=""}function A(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(a){return a!==n})}},call:function(n){e.forEach(function(a){return a&&a(n)})}}}function G(){return Math.random().toString(36).substr(2,8)}function Q(e){var t=e.pathname,n=t===void 0?"/":t,a=e.search,r=a===void 0?"":a,u=e.hash,l=u===void 0?"":u;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),l&&l!=="#"&&(n+=l.charAt(0)==="#"?l:"#"+l),n}function k(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}/**
 * React Router v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const T=c.createContext(null),N=c.createContext(null),U=c.createContext({outlet:null,matches:[]});function L(e,t){if(!e)throw new Error(t)}function X(e,t){t===void 0&&(t="/");let{pathname:n,search:a="",hash:r=""}=typeof e=="string"?k(e):e;return{pathname:n?n.startsWith("/")?n:Y(n,t):t,search:te(a),hash:ne(r)}}function Y(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function V(e,t,n){let a=typeof e=="string"?k(e):e,r=e===""||a.pathname===""?"/":a.pathname,u;if(r==null)u=n;else{let s=t.length-1;if(r.startsWith("..")){let f=r.split("/");for(;f[0]==="..";)f.shift(),s-=1;a.pathname=f.join("/")}u=s>=0?t[s]:"/"}let l=X(a,u);return r&&r!=="/"&&r.endsWith("/")&&!l.pathname.endsWith("/")&&(l.pathname+="/"),l}function Z(e){return e===""||e.pathname===""?"/":typeof e=="string"?k(e).pathname:e.pathname}function I(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&n!=="/"?null:e.slice(t.length)||"/"}const D=e=>e.join("/").replace(/\/\/+/g,"/"),ee=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),te=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ne=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ue(e){R()||L(!1);let{basename:t,navigator:n}=c.useContext(T),{hash:a,pathname:r,search:u}=ae(e),l=r;if(t!=="/"){let s=Z(e),f=s!=null&&s.endsWith("/");l=r==="/"?t+(f?"/":""):D([t,r])}return n.createHref({pathname:l,search:u,hash:a})}function R(){return c.useContext(N)!=null}function K(){return R()||L(!1),c.useContext(N).location}function se(){R()||L(!1);let{basename:e,navigator:t}=c.useContext(T),{matches:n}=c.useContext(U),{pathname:a}=K(),r=JSON.stringify(n.map(s=>s.pathnameBase)),u=c.useRef(!1);return c.useEffect(()=>{u.current=!0}),c.useCallback(function(s,f){if(f===void 0&&(f={}),!u.current)return;if(typeof s=="number"){t.go(s);return}let d=V(s,JSON.parse(r),a);e!=="/"&&(d.pathname=D([e,d.pathname])),(f.replace?t.replace:t.push)(d,f.state)},[e,t,r,a])}function ae(e){let{matches:t}=c.useContext(U),{pathname:n}=K(),a=JSON.stringify(t.map(r=>r.pathnameBase));return c.useMemo(()=>V(e,JSON.parse(a),n),[e,a,n])}function ce(e){let{basename:t="/",children:n=null,location:a,navigationType:r=y.Pop,navigator:u,static:l=!1}=e;R()&&L(!1);let s=ee(t),f=c.useMemo(()=>({basename:s,navigator:u,static:l}),[s,u,l]);typeof a=="string"&&(a=k(a));let{pathname:d="/",search:v="",hash:P="",state:b=null,key:m="default"}=a,C=c.useMemo(()=>{let w=I(d,s);return w==null?null:{pathname:w,search:v,hash:P,state:b,key:m}},[s,d,v,P,b,m]);return C==null?null:c.createElement(T.Provider,{value:f},c.createElement(N.Provider,{children:n,value:{location:C,navigationType:r}}))}export{ce as R,se as a,K as b,le as c,ae as d,Q as e,ue as u};
