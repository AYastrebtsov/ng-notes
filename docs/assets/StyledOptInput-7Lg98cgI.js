import{j}from"./jsx-dev-runtime-CsvOyHnx.js";import{c as pe}from"./utils-B6PcESyr.js";import{r as t}from"./index-DGAqIW1f.js";var ke=Object.defineProperty,Pe=Object.defineProperties,Me=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,de=(e,a,l)=>a in e?ke(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,Oe=(e,a)=>{for(var l in a||(a={}))me.call(a,l)&&de(e,l,a[l]);if(Q)for(var l of Q(a))fe.call(a,l)&&de(e,l,a[l]);return e},Ie=(e,a)=>Pe(e,Me(a)),Ne=(e,a)=>{var l={};for(var u in e)me.call(e,u)&&a.indexOf(u)<0&&(l[u]=e[u]);if(e!=null&&Q)for(var u of Q(e))a.indexOf(u)<0&&fe.call(e,u)&&(l[u]=e[u]);return l},je="^\\d+$";function Re(e){let a=setTimeout(e,0),l=setTimeout(e,10),u=setTimeout(e,50);return[a,l,u]}function _e(e){let a=t.useRef();return t.useEffect(()=>{a.current=e}),a.current}var We=18,ve=40,Be=`${ve}px`,Te=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Ae({containerRef:e,inputRef:a,pushPasswordManagerStrategy:l,isFocused:u}){let y=t.useRef({done:!1,refocused:!1}),[c,U]=t.useState(!1),[w,G]=t.useState(!1),[R,z]=t.useState(!1),X=t.useMemo(()=>l==="none"?!1:(l==="increase-width"||l==="experimental-no-flickering")&&c&&w,[c,w,l]),C=t.useCallback(()=>{let f=e.current,p=a.current;if(!f||!p||R||l==="none")return;let o=f,b=o.getBoundingClientRect().left+o.offsetWidth,_=o.getBoundingClientRect().top+o.offsetHeight/2,q=b-We,J=_;if(!(document.querySelectorAll(Te).length===0&&document.elementFromPoint(q,J)===f)&&(U(!0),z(!0),!y.current.refocused&&document.activeElement===p)){let A=[p.selectionStart,p.selectionEnd];p.blur(),p.focus(),p.setSelectionRange(A[0],A[1]),y.current.refocused=!0}},[e,a,R,l]);return t.useEffect(()=>{let f=e.current;if(!f||l==="none")return;function p(){let b=window.innerWidth-f.getBoundingClientRect().right;G(b>=ve)}p();let o=setInterval(p,1e3);return()=>{clearInterval(o)}},[e,l]),t.useEffect(()=>{let f=u||document.activeElement===a.current;if(l==="none"||!f)return;let p=setTimeout(C,0),o=setTimeout(C,2e3),b=setTimeout(C,5e3),_=setTimeout(()=>{z(!0)},6e3);return()=>{clearTimeout(p),clearTimeout(o),clearTimeout(b),clearTimeout(_)}},[a,u,l,C]),{hasPWMBadge:c,willPushPWMBadge:X,PWM_BADGE_SPACE_WIDTH:Be}}var Fe=t.createContext({}),ge=t.forwardRef((e,a)=>{var l=e,{value:u,onChange:y,maxLength:c,textAlign:U="left",pattern:w=je,inputMode:G="numeric",onComplete:R,pushPasswordManagerStrategy:z="increase-width",containerClassName:X,noScriptCSSFallback:C=He,render:f,children:p}=l,o=Ne(l,["value","onChange","maxLength","textAlign","pattern","inputMode","onComplete","pushPasswordManagerStrategy","containerClassName","noScriptCSSFallback","render","children"]),b,_,q,J,A;let[he,be]=t.useState(typeof o.defaultValue=="string"?o.defaultValue:""),d=u??he,k=_e(d),F=t.useCallback(n=>{y==null||y(n),be(n)},[y]),h=t.useMemo(()=>w?typeof w=="string"?new RegExp(w):w:null,[w]),s=t.useRef(null),Y=t.useRef(null),Z=t.useRef({value:d,onChange:F,isIOS:typeof window<"u"&&((_=(b=window==null?void 0:window.CSS)==null?void 0:b.supports)==null?void 0:_.call(b,"-webkit-touch-callout","none"))}),K=t.useRef({prev:[(q=s.current)==null?void 0:q.selectionStart,(J=s.current)==null?void 0:J.selectionEnd,(A=s.current)==null?void 0:A.selectionDirection]});t.useImperativeHandle(a,()=>s.current,[]),t.useEffect(()=>{let n=s.current,r=Y.current;if(!n||!r)return;Z.current.value!==n.value&&Z.current.onChange(n.value),K.current.prev=[n.selectionStart,n.selectionEnd,n.selectionDirection];function m(){if(document.activeElement!==n){L(null),V(null);return}let i=n.selectionStart,g=n.selectionEnd,x=n.selectionDirection,M=n.maxLength,O=n.value,T=K.current.prev,E=-1,D=-1,I;if(O.length!==0&&i!==null&&g!==null){let Ee=i===g,De=i===O.length&&O.length<M;if(Ee&&!De){let N=i;if(N===0)E=0,D=1,I="forward";else if(N===M)E=N-1,D=N,I="backward";else if(M>1&&O.length>1){let ne=0;if(T[0]!==null&&T[1]!==null){I=N<T[1]?"backward":"forward";let Ce=T[0]===T[1]&&T[0]<M;I==="backward"&&!Ce&&(ne=-1)}E=ne+N,D=ne+N+1}}E!==-1&&D!==-1&&E!==D&&s.current.setSelectionRange(E,D,I)}let se=E!==-1?E:i,ce=D!==-1?D:g,xe=I??x;L(se),V(ce),K.current.prev=[se,ce,xe]}if(document.addEventListener("selectionchange",m,{capture:!0}),m(),document.activeElement===n&&ee(!0),!document.getElementById("input-otp-style")){let i=document.createElement("style");if(i.id="input-otp-style",document.head.appendChild(i),i.sheet){let g="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";$(i.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),$(i.sheet,`[data-input-otp]:autofill { ${g} }`),$(i.sheet,`[data-input-otp]:-webkit-autofill { ${g} }`),$(i.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),$(i.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let v=()=>{r&&r.style.setProperty("--root-height",`${n.clientHeight}px`)};v();let S=new ResizeObserver(v);return S.observe(n),()=>{document.removeEventListener("selectionchange",m,{capture:!0}),S.disconnect()}},[]);let[re,le]=t.useState(!1),[H,ee]=t.useState(!1),[P,L]=t.useState(null),[W,V]=t.useState(null);t.useEffect(()=>{Re(()=>{var n,r,m,v;(n=s.current)==null||n.dispatchEvent(new Event("input"));let S=(r=s.current)==null?void 0:r.selectionStart,i=(m=s.current)==null?void 0:m.selectionEnd,g=(v=s.current)==null?void 0:v.selectionDirection;S!==null&&i!==null&&(L(S),V(i),K.current.prev=[S,i,g])})},[d,H]),t.useEffect(()=>{k!==void 0&&d!==k&&k.length<c&&d.length===c&&(R==null||R(d))},[c,R,k,d]);let B=Ae({containerRef:Y,inputRef:s,pushPasswordManagerStrategy:z,isFocused:H}),ae=t.useCallback(n=>{let r=n.currentTarget.value.slice(0,c);if(r.length>0&&h&&!h.test(r)){n.preventDefault();return}typeof k=="string"&&r.length<k.length&&document.dispatchEvent(new Event("selectionchange")),F(r)},[c,F,k,h]),oe=t.useCallback(()=>{var n;if(s.current){let r=Math.min(s.current.value.length,c-1),m=s.current.value.length;(n=s.current)==null||n.setSelectionRange(r,m),L(r),V(m)}ee(!0)},[c]),ie=t.useCallback(n=>{var r,m;let v=s.current;if(!Z.current.isIOS||!n.clipboardData||!v)return;let S=n.clipboardData.getData("text/plain");n.preventDefault();let i=(r=s.current)==null?void 0:r.selectionStart,g=(m=s.current)==null?void 0:m.selectionEnd,x=(i!==g?d.slice(0,i)+S+d.slice(g):d.slice(0,i)+S+d.slice(i)).slice(0,c);if(x.length>0&&h&&!h.test(x))return;v.value=x,F(x);let M=Math.min(x.length,c-1),O=x.length;v.setSelectionRange(M,O),L(M),V(O)},[c,F,h,d]),Se=t.useMemo(()=>({position:"relative",cursor:o.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[o.disabled]),ue=t.useMemo(()=>({position:"absolute",inset:0,width:B.willPushPWMBadge?`calc(100% + ${B.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:B.willPushPWMBadge?`inset(0 ${B.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:U,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[B.PWM_BADGE_SPACE_WIDTH,B.willPushPWMBadge,U]),ye=t.useMemo(()=>t.createElement("input",Ie(Oe({autoComplete:o.autoComplete||"one-time-code"},o),{"data-input-otp":!0,"data-input-otp-mss":P,"data-input-otp-mse":W,inputMode:G,pattern:h==null?void 0:h.source,style:ue,maxLength:c,value:d,ref:s,onPaste:n=>{var r;ie(n),(r=o.onPaste)==null||r.call(o,n)},onChange:ae,onMouseOver:n=>{var r;le(!0),(r=o.onMouseOver)==null||r.call(o,n)},onMouseLeave:n=>{var r;le(!1),(r=o.onMouseLeave)==null||r.call(o,n)},onFocus:n=>{var r;oe(),(r=o.onFocus)==null||r.call(o,n)},onBlur:n=>{var r;ee(!1),(r=o.onBlur)==null||r.call(o,n)}})),[ae,oe,ie,G,ue,c,W,P,o,h==null?void 0:h.source,d]),te=t.useMemo(()=>({slots:Array.from({length:c}).map((n,r)=>{let m=H&&P!==null&&W!==null&&(P===W&&r===P||r>=P&&r<W),v=d[r]!==void 0?d[r]:null;return{char:v,isActive:m,hasFakeCaret:m&&v===null}}),isFocused:H,isHovering:!o.disabled&&re}),[H,re,c,W,P,o.disabled,d]),we=t.useMemo(()=>f?f(te):t.createElement(Fe.Provider,{value:te},p),[p,te,f]);return t.createElement(t.Fragment,null,C!==null&&t.createElement("noscript",null,t.createElement("style",null,C)),t.createElement("div",{ref:Y,"data-input-otp-container":!0,style:Se,className:X},we,t.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ye)))});ge.displayName="Input";function $(e,a){try{e.insertRule(a)}catch{console.error("input-otp could not insert CSS rule:",a)}}var He=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const Le=e=>j.jsxDEV("div",{className:pe("relative h-[58px] w-11 font-Inter text-[2rem] text-xl font-bold text-212121","flex items-center justify-center gap-x-[6px]","transition-all duration-300","rounded-md border border-D9DDE1","group-focus-within:border-D9DDE1","outline-accent-foreground/60 outline outline-0",{"outline-accent-foreground border-0 outline-1":e.char},{"accent-foreground border-0 outline-1 outline-D50032":e.error},{"outline-accent-foreground border-0 outline-1":e.char&&e.error}),children:e.char!==null&&j.jsxDEV("div",{children:e.char},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/shared/ui/StyledOptInput/StyledOptInput.tsx",lineNumber:32,columnNumber:29},void 0)},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/shared/ui/StyledOptInput/StyledOptInput.tsx",lineNumber:19,columnNumber:3},void 0),Ve=t.forwardRef((e,a)=>j.jsxDEV(ge,{ref:a,maxLength:4,value:e.value,onChange:l=>{e.onChange&&e.onChange(l)},onComplete:l=>{e.onComplete&&e.onComplete(l)},disabled:e.disabled,containerClassName:pe("group flex items-center has-[:disabled]:opacity-30",e.className),render:({slots:l})=>j.jsxDEV(j.Fragment,{children:j.jsxDEV("div",{className:"flex gap-x-[6px]",children:l.map((u,y)=>j.jsxDEV(Le,{error:e.error,...u},y,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/shared/ui/StyledOptInput/StyledOptInput.tsx",lineNumber:57,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/shared/ui/StyledOptInput/StyledOptInput.tsx",lineNumber:55,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/shared/ui/StyledOptInput/StyledOptInput.tsx",lineNumber:54,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/shared/ui/StyledOptInput/StyledOptInput.tsx",lineNumber:37,columnNumber:3},void 0));Ve.__docgenInfo={description:"",methods:[],displayName:"StyledOptInput"};export{Ve as S};
