import{j as s}from"./jsx-dev-runtime-BETcGmrp.js";import{T as re}from"./index-DmOLfB1G.js";import{L as te,B as oe}from"./index-CWEZQE0G.js";import{h as _,H as w}from"./index-Dt5PkBs3.js";import{b as se,u as ae,i as ne,c as ie,a as ce}from"./store-CMG6tZte.js";import{g as ue,r as le,a as me}from"./getSendEmail-BVNUn-YP.js";import{p as pe,r as de,a as fe}from"./postSetConfirmationEmail-BhqBTQUW.js";import{c as U}from"./utils-Bgs-dzIv.js";import{u as T}from"./useMutation-Djmu82TW.js";import{u as he,C as M}from"./index.esm-aGtwzpR0.js";import{c as be,a as xe,b as ve,o as Ne}from"./object-BGxo6DNn.js";import{I as ye}from"./inputtext.esm-9srZuwRb.js";import{r as c}from"./index-BdMw_Ax9.js";import{P as ke}from"./api.esm-CK-Pl4SF.js";import{C as Ee,b as je,d as ge,D as E,O,a as De,u as _e,c as G,I as we}from"./ripple.esm-CEskJZ5p.js";import{C as Se,u as Pe}from"./StyledToast-DSRo3MwN.js";import{T as Ie,S as Ve}from"./StyledButton-BfTgqHe6.js";import{I as Oe}from"./IntroHeader-DCiaQ80g.js";import{S as Ce}from"./StyledRipple-UT5xWoNU.js";import{I as Ue}from"./InfoLink-C6_5icqN.js";import{a as Te}from"./index-BmGp6xc6.js";import{P as Me}from"./Provider-C_7POvRj.js";import{d as S}from"./delay-DW_e480v.js";import"./iframe-DNwh6oNd.js";import"../sb-preview/runtime.js";import"./index-BSE0ybse.js";import"./mapValues-BXPElCjX.js";import"./index-BU6WCtrf.js";import"./index-C-I6vmrZ.js";import"./index-BvvlT_10.js";import"./index-DrFu-skq.js";import"./index-zmhHS-aW.js";import"./mutation-B5pq8hhe.js";import"./QueryClientProvider-DLasFzzO.js";import"./jsx-runtime-B_9IJGoR.js";import"./utils-km2FGkQ4.js";import"./index-ByRWxq36.js";import"./portal.esm-CvrWT0gn.js";import"./ArrowIcon-DVFHFDWJ.js";import"./CloseIcon-BosYNr9-.js";function N(){return N=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},N.apply(this,arguments)}function y(t){"@babel/helpers - typeof";return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},y(t)}function Re(t,r){if(y(t)!=="object"||t===null)return t;var o=t[Symbol.toPrimitive];if(o!==void 0){var a=o.call(t,r||"default");if(y(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Fe(t){var r=Re(t,"string");return y(r)==="symbol"?r:String(r)}function Ae(t,r,o){return r=Fe(r),r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var Be={box:"p-checkbox-box",input:"p-checkbox-input",icon:"p-checkbox-icon",root:function(r){var o=r.props,a=r.checked;return G("p-checkbox p-component",{"p-highlight":a,"p-disabled":o.disabled,"p-invalid":o.invalid,"p-variant-filled":o.variant==="filled"})}},j=Ee.extend({defaultProps:{__TYPE:"Checkbox",autoFocus:!1,checked:!1,className:null,disabled:!1,falseValue:!1,icon:null,id:null,inputId:null,inputRef:null,invalid:!1,name:null,onChange:null,onContextMenu:null,onMouseDown:null,readOnly:!1,required:!1,style:null,tabIndex:null,tooltip:null,tooltipOptions:null,trueValue:!0,value:null,children:void 0},css:{classes:Be}});function R(t,r){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,a)}return o}function F(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?R(Object(o),!0).forEach(function(a){Ae(t,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):R(Object(o)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(o,a))})}return t}var K=c.memo(c.forwardRef(function(t,r){var o=je(),a=c.useContext(ke),e=j.getProps(t,a),x=j.setMetaData({props:e,context:{checked:e.checked===e.trueValue,disabled:e.disabled}}),l=x.ptm,h=x.cx,k=x.isUnstyled;ge(j.css.styles,k,{name:"checkbox"});var v=c.useRef(null),u=c.useRef(e.inputRef),d=function(){return e.checked===e.trueValue},P=function(i){if(!(e.disabled||e.readonly)&&e.onChange){var f,b=d(),p=b?e.falseValue:e.trueValue,Z={originalEvent:i,value:e.value,checked:p,stopPropagation:function(){i==null||i.stopPropagation()},preventDefault:function(){i==null||i.preventDefault()},target:{type:"checkbox",name:e.name,id:e.id,value:e.value,checked:p}};if(e==null||(f=e.onChange)===null||f===void 0||f.call(e,Z),i.defaultPrevented)return;E.focus(u.current)}},I=function(){var i;e==null||(i=e.onFocus)===null||i===void 0||i.call(e)},V=function(){var i;e==null||(i=e.onBlur)===null||i===void 0||i.call(e)};c.useImperativeHandle(r,function(){return{props:e,focus:function(){return E.focus(u.current)},getElement:function(){return v.current},getInput:function(){return u.current}}}),c.useEffect(function(){O.combinedRefs(u,e.inputRef)},[u,e.inputRef]),De(function(){u.current.checked=d()},[e.checked,e.trueValue]),_e(function(){e.autoFocus&&E.focus(u.current,e.autoFocus)});var n=d(),X=O.isNotEmpty(e.tooltip),C=j.getOtherProps(e),Y=o({id:e.id,className:G(e.className,h("root",{checked:n})),style:e.style,"data-p-highlight":n,"data-p-disabled":e.disabled,onContextMenu:e.onContextMenu,onMouseDown:e.onMouseDown},C,l("root")),z=function(){var i=O.reduceKeys(C,E.ARIA_PROPS),f=o(F({id:e.inputId,type:"checkbox",className:h("input"),name:e.name,tabIndex:e.tabIndex,onFocus:function(p){return I()},onBlur:function(p){return V()},onChange:function(p){return P(p)},disabled:e.disabled,readOnly:e.readOnly,required:e.required,"aria-invalid":e.invalid,checked:n},i),l("input"));return c.createElement("input",N({ref:u},f))},Q=function(){var i=o({className:h("icon")},l("icon")),f=o({className:h("box",{checked:n}),"data-p-highlight":n,"data-p-disabled":e.disabled},l("box")),b=n?e.icon||c.createElement(Se,i):null,p=we.getJSXIcon(b,F({},i),{props:e,checked:n});return c.createElement("div",f,p)};return c.createElement(c.Fragment,null,c.createElement("div",N({ref:v},Y),z(),Q()),X&&c.createElement(Ie,N({target:v,content:e.tooltip,pt:l("tooltip")},e.tooltipOptions)))}));K.displayName="Checkbox";const Le=be({email:xe().email().required(),checkbox:ve().required()});function J(){const t=se(),r=Te(),o=ae(n=>n.user.apiToken),{StyledToast:a,showToast:e}=Pe(),{handleSubmit:x,control:l,watch:h,formState:{errors:k}}=he({defaultValues:{email:"",checkbox:!1},resolver:Ne(Le)}),{mutate:v,isPending:u,isSuccess:d}=T({mutationFn:ue,onError:n=>{e({variant:"info",text:n.message})}}),{mutate:P,isPending:I,isSuccess:V}=T({mutationFn:pe,onError:n=>{e({variant:"info",text:n.message})}});return c.useEffect(()=>{d&&d&&r("/auth/confirm-email")},[d,V]),s.jsxDEV("div",{className:"flex h-dvh flex-col",children:[null,s.jsxDEV(Oe,{arrowAction:()=>{r(-1)},closeAction:()=>{r(-1)},className:"px-2 pt-2"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:90,columnNumber:7},this),s.jsxDEV("div",{className:"flex flex-grow flex-col px-3 pb-7 pt-[14px]",children:[s.jsxDEV("h1",{className:"pb-[14px] font-Inter text-base/5 font-bold text-212121",children:"Отказ от чеков"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:101,columnNumber:9},this),s.jsxDEV("p",{className:"pb-[18px] font-Inter text-xs/[1.125rem] font-normal text-212121",children:"Нет чекам - нет проблем! Отслеживайте свои покупки в нашем мобильном приложении и получайте чеки на почту, забудьте о лишней бумаге!"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:103,columnNumber:9},this),s.jsxDEV("form",{className:"flex flex-grow flex-col",onSubmit:x(n=>{t(ne(n.email)),v({api_token:o||"",email:n.email}),P({api_token:o||"",email:n.email})}),children:[s.jsxDEV(M,{name:"email",control:l,render:({field:n})=>s.jsxDEV("div",{className:U("relative flex flex-col rounded-lg border border-transparent bg-FAFAFA pb-[7px] pl-3 pr-3 pt-[21px]",{"border-D50032":k.email}),children:[s.jsxDEV("label",{htmlFor:"name",className:U("absolute left-3 top-[6px] font-Inter text-[0.5rem]/[0.625rem] text-8D929A",{"text-D50032":k.email}),children:"Электронная почта"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:134,columnNumber:17},this),s.jsxDEV(ye,{id:"name",placeholder:"Введите электронную почту",...n},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:142,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:126,columnNumber:15},this)},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:122,columnNumber:11},this),s.jsxDEV(M,{name:"checkbox",control:l,render:({field:n})=>s.jsxDEV("div",{className:"relative mt-[18px] flex gap-x-2",children:[s.jsxDEV(K,{checked:n.value,inputId:"checkbox",...n,pt:{icon:{className:"hidden"}}},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:152,columnNumber:17},this),s.jsxDEV("svg",{className:"absolute left-[3px] top-[3px] opacity-0 transition-opacity duration-200 peer-data-[p-highlight=true]:opacity-100",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:s.jsxDEV("path",{d:"M2 6.16182L4.82843 8.99025L10.4847 3.33337",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:170,columnNumber:19},this)},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:162,columnNumber:17},this),s.jsxDEV("label",{htmlFor:"checkbox",className:"font-Inter text-xs/[18px] font-normal text-212121",children:"Хочу получать чеки на почту"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:178,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:151,columnNumber:15},this)},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:147,columnNumber:11},this),s.jsxDEV(Ve,{disabled:!h("checkbox"),loading:I||u,className:"mt-auto",type:"submit",label:"Подтвердить почту"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:185,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:108,columnNumber:9},this),s.jsxDEV(te,{to:"/select-store/registration",className:"relative mt-[18px] flex min-h-9 items-center justify-center overflow-hidden rounded-md border-0 text-center font-Inter text-xs/[1.125rem] font-medium text-212121",children:["Пропустить",s.jsxDEV(Ce,{pt:{root:{style:{background:"rgba(145, 47, 70, 0.3)"}}}},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:199,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:194,columnNumber:9},this),s.jsxDEV(Ue,{className:"m-auto mt-[10px]",to:"/info",text:"Инфо"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:206,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:100,columnNumber:7},this),s.jsxDEV(a,{},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:208,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.tsx",lineNumber:87,columnNumber:5},this)}J.__docgenInfo={description:"",methods:[],displayName:"CheckReject"};const W=({children:t})=>s.jsxDEV(Me,{store:ie({reducer:{user:ce({name:"user",initialState:{apiToken:"mock_api_token_123456789"},reducers:{}}).reducer}}),children:t},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.stories.tsx",lineNumber:19,columnNumber:3},void 0),Sr={title:"Страницы/Aутентификация/Отказ от чеков",component:J,tags:["autodocs"],decorators:[oe],parameters:{layout:{padded:!1},docs:{page:()=>s.jsxDEV(s.Fragment,{children:[s.jsxDEV(re,{},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.stories.tsx",lineNumber:49,columnNumber:11},void 0),s.jsxDEV("h2",{children:"Адрес страницы: /auth/check-reject"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.stories.tsx",lineNumber:51,columnNumber:11},void 0),s.jsxDEV("h3",{children:"Используемые запросы:"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.stories.tsx",lineNumber:52,columnNumber:11},void 0),s.jsxDEV("p",{children:["getSendEmail() - VITE_GET_SEND_EMAIL - ","https://preprod.premiya.fivecorners.ru/api/loymax/setEmail"]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.stories.tsx",lineNumber:53,columnNumber:11},void 0),s.jsxDEV("p",{children:["postSetConfirmationEmail() - VITE_POST_SET_CONFIRMATION_EMAIL -","https://preprod.premiya.fivecorners.ru/api/loymax/setEmail"]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.stories.tsx",lineNumber:54,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.stories.tsx",lineNumber:48,columnNumber:9},void 0)}}},g={name:"Отказ от чеков",decorators:[t=>s.jsxDEV(W,{children:t()},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.stories.tsx",lineNumber:70,columnNumber:25},void 0)],parameters:{msw:{handlers:[_.get("https://preprod.premiya.fivecorners.ru/api/loymax/setEmail",async()=>(await S(2e3),w.json(le))),_.post("https://preprod.premiya.fivecorners.ru/api/loymax/setEmail",async()=>(await S(2e3),w.json(de)))]}}},D={name:"Отказ от чеков (ошибка)",decorators:[t=>s.jsxDEV(W,{children:t()},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/auth.check-reject/route.stories.tsx",lineNumber:89,columnNumber:25},void 0)],parameters:{msw:{handlers:[_.get("https://preprod.premiya.fivecorners.ru/api/loymax/setEmail",async()=>(await S(2e3),w.json(me))),_.post("https://preprod.premiya.fivecorners.ru/api/loymax/setEmail",async()=>(await S(2e3),w.json(fe)))]}}};var A,B,L;g.parameters={...g.parameters,docs:{...(A=g.parameters)==null?void 0:A.docs,source:{originalSource:`{
  name: 'Отказ от чеков',
  decorators: [story => <Mockstore>{story()}</Mockstore>],
  parameters: {
    msw: {
      handlers: [http.get(import.meta.env.VITE_GET_SEND_EMAIL, async () => {
        await delay(2000);
        return HttpResponse.json(responseEmailSuccess);
      }), http.post(import.meta.env.VITE_POST_SET_CONFIRMATION_EMAIL, async () => {
        await delay(2000);
        return HttpResponse.json(responseConfirmSuccess);
      })]
    }
  }
}`,...(L=(B=g.parameters)==null?void 0:B.docs)==null?void 0:L.source}}};var H,q,$;D.parameters={...D.parameters,docs:{...(H=D.parameters)==null?void 0:H.docs,source:{originalSource:`{
  name: 'Отказ от чеков (ошибка)',
  decorators: [story => <Mockstore>{story()}</Mockstore>],
  parameters: {
    msw: {
      handlers: [http.get(import.meta.env.VITE_GET_SEND_EMAIL, async () => {
        await delay(2000);
        return HttpResponse.json(responseEmailError);
      }), http.post(import.meta.env.VITE_POST_SET_CONFIRMATION_EMAIL, async () => {
        await delay(2000);
        return HttpResponse.json(responseConfirmError);
      })]
    }
  }
}`,...($=(q=D.parameters)==null?void 0:q.docs)==null?void 0:$.source}}};const Pr=["Primary","PrimaryError"];export{g as Primary,D as PrimaryError,Pr as __namedExportsOrder,Sr as default};
