import{j as e}from"./jsx-dev-runtime-BETcGmrp.js";import{T as w,D as v}from"./index-DmOLfB1G.js";import{u as m,c as y,a as _}from"./store-CMG6tZte.js";import{S as E}from"./StyledButton-BfTgqHe6.js";import{u as V}from"./StyledToast-DSRo3MwN.js";import{u as g,C as j}from"./index.esm-aGtwzpR0.js";import{c as U,a as C,o as S}from"./object-BGxo6DNn.js";import{c as n}from"./utils-Bgs-dzIv.js";import{I as A}from"./inputmask.esm-jINIAqb2.js";import{u as B}from"./useMutation-Djmu82TW.js";import{p as F}from"./postBlockCard-BtHG0J8B.js";import{a as G}from"./index-BmGp6xc6.js";import{P}from"./Provider-C_7POvRj.js";import"./index-BdMw_Ax9.js";import"./iframe-DNwh6oNd.js";import"../sb-preview/runtime.js";import"./index-BSE0ybse.js";import"./mapValues-BXPElCjX.js";import"./index-BU6WCtrf.js";import"./index-C-I6vmrZ.js";import"./index-BvvlT_10.js";import"./index-DrFu-skq.js";import"./api.esm-CK-Pl4SF.js";import"./ripple.esm-CEskJZ5p.js";import"./portal.esm-CvrWT0gn.js";import"./index-ByRWxq36.js";import"./inputtext.esm-9srZuwRb.js";import"./mutation-B5pq8hhe.js";import"./QueryClientProvider-DLasFzzO.js";import"./jsx-runtime-B_9IJGoR.js";import"./utils-km2FGkQ4.js";import"./index-Dt5PkBs3.js";import"./index-zmhHS-aW.js";const d=()=>e.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",width:8,height:12,fill:"none",children:e.jsxDEV("path",{fill:"#212121",d:"m.288 6 6.01 6.01 1.414-1.414-4.6-4.6 4.6-4.6L6.298-.01.288 6Z"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/icon/leftBlackArrow.tsx",lineNumber:3,columnNumber:5},void 0)},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/icon/leftBlackArrow.tsx",lineNumber:2,columnNumber:3},void 0);d.__docgenInfo={description:"",methods:[],displayName:"LeftBlackArrowSVG"};const T=U({newCard:C().length(7).required()});function f(){const s=G(),a=m(r=>r.user.apiToken),o=m(r=>r.user.cardId),{StyledToast:N,showToast:i}=V({positionBottom:!0}),{handleSubmit:x,control:b,formState:{errors:l},setError:D,reset:h}=g({defaultValues:{newCard:""},resolver:S(T)}),{mutate:k,isPending:M}=B({mutationFn:F,onSuccess:r=>{i({variant:"success",text:"Замена карты прошла успешно",sticky:!0}),h({newCard:""})},onError:r=>{i({variant:"info",text:r.message,sticky:!0}),D("newCard",{type:"server",message:r.message})}});return e.jsxDEV("div",{className:"flex h-dvh flex-col bg-white",children:[e.jsxDEV("div",{className:"flex items-center gap-3 border-b border-8D929A border-opacity-15 p-[17px] ",children:[e.jsxDEV("button",{onClick:()=>s(-1),className:"cursor-pointer",children:e.jsxDEV(d,{},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:67,columnNumber:11},this)},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:66,columnNumber:9},this),e.jsxDEV("p",{className:"font-Golos text-[1.063rem] font-bold leading-[1.25rem]",children:"Замена карты"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:70,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:65,columnNumber:7},this),e.jsxDEV("div",{className:"flex flex-col px-3",children:[e.jsxDEV("form",{className:"mt-[22px]",onSubmit:x(r=>{k({api_token:a||"",cardNumber:r.newCard})}),children:[e.jsxDEV(j,{name:"newCard",control:b,render:({field:r})=>e.jsxDEV("div",{className:n("relative flex h-10 flex-col rounded-lg border border-8D929A bg-FAFAFA pb-[7px] pl-4 pr-4 pt-[11px]",{"border-D50032":l.newCard}),children:[e.jsxDEV("label",{htmlFor:"newCard",className:n("absolute left-3 top-[-10px] bg-FAFAFA p-1 font-Golos text-[0.625rem]/[0.75rem]",{"text-D50032":l.newCard}),children:"Новая карта"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:95,columnNumber:17},this),e.jsxDEV(A,{mask:"9 999 999",unmask:!0,id:"newCard",...r},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:103,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:87,columnNumber:15},this)},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:83,columnNumber:11},this),o!=null&&o.realCard.number?e.jsxDEV("p",{className:"mt-[18px] font-Golos text-[1.063rem] font-bold leading-[1.25rem]",children:["Выполняется блокировка карты: ",o==null?void 0:o.realCard.number]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:109,columnNumber:13},this):e.jsxDEV(e.Fragment,{},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:113,columnNumber:13},this),e.jsxDEV("ul",{className:"mb-7 ml-4 mt-3 list-disc marker:text-A1C441",children:[e.jsxDEV("li",{className:"font-Golos text-[0.75rem] font-normal leading-[1.125rem] text-black",children:"Срок обработки заявки до 3-х рабочих дней."},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:117,columnNumber:13},this),e.jsxDEV("li",{className:"font-Golos text-[0.75rem] font-normal leading-[1.125rem] text-black",children:"Восстановить карту после замены невозможно."},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:120,columnNumber:13},this),e.jsxDEV("li",{className:"font-Golos text-[0.75rem] font-normal leading-[1.125rem] text-black",children:"Баланс карты, история покупок и персональные данные будут перенесены автоматически на новую карту."},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:123,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:116,columnNumber:11},this),e.jsxDEV(E,{label:"Запросить замену",type:"submit"},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:128,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:74,columnNumber:9},this),e.jsxDEV("div",{className:"absolute bottom-6 mt-5",children:e.jsxDEV(N,{},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:132,columnNumber:11},this)},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:131,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:73,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.tsx",lineNumber:64,columnNumber:5},this)}f.__docgenInfo={description:"",methods:[],displayName:"ProfileReplaceCard"};const I=({children:s})=>e.jsxDEV(P,{store:y({reducer:{user:_({name:"user",initialState:{apiToken:"mock_api_tocken_123456789",phoneValue:"+7 915 457 24 90",cardId:{realCard:{id:"mock_card_id_123456789",number:"123456789"}}},reducers:{}}).reducer}}),children:s},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.stories.tsx",lineNumber:10,columnNumber:3},void 0),he={title:"Страницы/Главная/Профиль/Замена карты",component:f,tags:["autodocs"],parameters:{layout:{padded:!1},docs:{page:()=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV(w,{},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.stories.tsx",lineNumber:50,columnNumber:11},void 0),e.jsxDEV(v,{},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.stories.tsx",lineNumber:51,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.stories.tsx",lineNumber:49,columnNumber:9},void 0),description:{component:`<p> Адрес страницы: /profile/replace-card </p>
<p>Используемые запросы:</p>`}}}},t={name:"Замена Карты",decorators:[s=>e.jsxDEV(I,{children:s()},void 0,!1,{fileName:"/Users/andrey/Documents/work/client_premia/src/app/routes/profile.replace-card/route.stories.tsx",lineNumber:64,columnNumber:25},void 0)]};var c,u,p;t.parameters={...t.parameters,docs:{...(c=t.parameters)==null?void 0:c.docs,source:{originalSource:`{
  name: 'Замена Карты',
  decorators: [story => <Mockstore>{story()}</Mockstore>]
}`,...(p=(u=t.parameters)==null?void 0:u.docs)==null?void 0:p.source}}};const ke=["Primary"];export{t as Primary,ke as __namedExportsOrder,he as default};
